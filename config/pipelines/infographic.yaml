id: infographic
name: Infographic Pipeline
description: "Analyze data â†’ generate structured infographic content with visual direction"
version: "3.0"

trigger:
  type: command
  pattern: "infographic|visualize.*data|data.*graphic|make.*graphic"

inputs:
  - name: data_source
    type: string
    description: "Raw data, statistics, or description of data to visualize"
    required: true
  - name: brand_profile
    type: reference
    description: "Brand profile for styling"
    default: active_brand
  - name: style
    type: string
    description: "Infographic style (statistical, timeline, process, comparison, geographic)"
    default: auto

steps:
  - id: analyze_data
    skill: content-analyzer
    modelTier: complex
    action: >
      Parse and analyze the raw data source. Extract key metrics,
      relationships, hierarchies, and trends. Identify the most
      compelling data points and suggest visual metaphors, layout
      structure, narrative flow, and section breakdown for an
      infographic in ${inputs.style} style.
    inputs:
      content: "${inputs.data_source}"
      brand_profile: "${inputs.brand_profile}"
    retry:
      max: 2
      backoff: exponential
    output: data_analysis

  - id: generate_content
    skill: content-repurpose
    modelTier: complex
    action: >
      Transform the data analysis into structured infographic content.
      Generate section headings, data callouts, supporting text,
      icon descriptions, chart specifications, and visual hierarchy
      notes. Include alt text for accessibility. Output should be
      a complete content brief that a designer can execute.
    inputs:
      content: "$data_analysis"
      target_platforms: ["infographic"]
      brand_profile: "${inputs.brand_profile}"
    retry:
      max: 2
      backoff: exponential
    output: infographic_content

outputs:
  - format: infographic_brief
    includes:
      - section_content
      - data_callouts
      - chart_specifications
      - visual_hierarchy
      - alt_text
      - design_notes
