id: seo-blog
name: SEO Blog Pipeline
description: "Generate an SEO-optimized blog post with keyword targeting"
version: "2.0"

trigger:
  type: command
  pattern: "seo.*blog|write.*blog.*for|rank.*for"

inputs:
  - name: topic
    type: string
    description: "Blog topic or title"
    required: true
  - name: keywords
    type: array
    description: "Target SEO keywords"
    default: []
  - name: brand_profile
    type: reference
    description: "Brand profile for tone and voice"
    default: active_brand
  - name: word_count
    type: integer
    description: "Target word count"
    default: 1800
  - name: style
    type: string
    description: "Writing style"
    default: informational

steps:
  - id: write
    skill: seo-blog
    modelTier: complex
    action: >
      Generate a comprehensive SEO-optimized blog post on the given topic.
      Follow brand voice, target keywords, and structure for readability.
    inputs:
      topic: "${inputs.topic}"
      keywords: "${inputs.keywords}"
      word_count: "${inputs.word_count}"
      style: "${inputs.style}"
      brand_profile: "${inputs.brand_profile}"
    retry:
      max: 2
      backoff: exponential
    output: article

outputs:
  - format: markdown
    includes:
      - article_body
      - meta_title
      - meta_description
      - heading_structure
