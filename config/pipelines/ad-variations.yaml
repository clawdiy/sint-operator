id: ad-variations
name: Ad Variations Pipeline
description: "Analyze product/campaign context â†’ generate headline and copy variations for ads"
version: "3.0"

trigger:
  type: command
  pattern: "ad.*variations|create.*ads|generate.*ads|ad.*creatives"

inputs:
  - name: product_description
    type: string
    description: "Description of the product or service to advertise"
    required: true
  - name: brand_profile
    type: reference
    description: "Brand profile for style and messaging"
    default: active_brand
  - name: campaign_goal
    type: string
    description: "Campaign objective (awareness, conversion, engagement)"
    default: conversion
  - name: target_platforms
    type: array
    description: "Ad platforms to generate copy for"
    default: [instagram, facebook, linkedin, twitter]

steps:
  - id: analyze
    skill: content-analyzer
    modelTier: routine
    action: >
      Analyze the product description and brand context. Identify key selling
      points, target audience pain points, emotional triggers, and competitive
      differentiators. Extract messaging angles for ad copy.
    inputs:
      content: "${inputs.product_description}"
      brand_profile: "${inputs.brand_profile}"
      platforms: "${inputs.target_platforms}"
    retry:
      max: 2
      backoff: exponential
    output: analysis

  - id: generate_variations
    skill: content-repurpose
    modelTier: complex
    action: >
      Using the analysis, generate 10 ad copy variations across different angles:
      benefit-driven, curiosity, social proof, urgency, emotional, and
      problem-solution. Each variation should include a headline, body copy,
      and CTA optimized for the target platforms. Format for ${inputs.campaign_goal}.
    inputs:
      content: "$analysis"
      target_platforms: "${inputs.target_platforms}"
      brand_profile: "${inputs.brand_profile}"
    retry:
      max: 2
      backoff: exponential
    output: ad_variations

outputs:
  - format: ad_copy_package
    includes:
      - headline_variations
      - body_copy_variations
      - cta_options
      - platform_adaptations
